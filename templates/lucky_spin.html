<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lucky Spin</title>

<style>
body{
    background:
        radial-gradient(circle at top, #2b1a3d, #0b0613 70%);
    font-family:'Poppins', Arial, sans-serif;
    color:white;
    text-align:center;
    margin:0;
    padding:0;
}

/* ===== HEADER ===== */
.header{
    padding:18px;
    font-size:22px;
    font-weight:700;
    letter-spacing:1px;
}

/* ===== WHEEL ===== */
.wheel-container{
    position:relative;
    width:320px;
    height:320px;
    margin:25px auto 10px;
}

.wheel{
    width:100%;
    height:100%;
    border-radius:50%;
    border:10px solid #d6b45c;
    background:conic-gradient(
        #1e88e5 0deg 45deg,
        #1565c0 45deg 90deg,
        #1e88e5 90deg 135deg,
        #1565c0 135deg 180deg,
        #1e88e5 180deg 225deg,
        #1565c0 225deg 270deg,
        #1e88e5 270deg 315deg,
        #1565c0 315deg 360deg
    );
    box-shadow:
        0 0 25px rgba(255,215,0,.4),
        inset 0 0 20px rgba(0,0,0,.6);
    transition:transform 4s cubic-bezier(.17,.67,.25,1);
}

/* ===== POINTER ===== */
.pointer{
    width:0;
    height:0;
    border-left:16px solid transparent;
    border-right:16px solid transparent;
    border-bottom:34px solid #ffcc00;
    position:absolute;
    top:-18px;
    left:50%;
    transform:translateX(-50%);
    z-index:20;
    filter:drop-shadow(0 0 6px #ffd700);
}

/* ===== CENTER GEM ===== */
.center-btn{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:radial-gradient(circle, #ff5f5f, #8b0000);
    width:95px;
    height:95px;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:800;
    font-size:16px;
    color:white;
    z-index:10;
    box-shadow:
        inset 0 0 15px rgba(0,0,0,.6),
        0 0 20px rgba(255,0,0,.6);
}

/* ===== INFO BOX ===== */
.info-box{
    margin:15px 20px;
    background:rgba(255,255,255,.06);
    padding:14px;
    border-radius:14px;
    font-size:14px;
    backdrop-filter:blur(6px);
}

/* ===== SPIN BUTTON ===== */
.spin-btn{
    width:90%;
    max-width:380px;
    margin:15px auto;
    padding:16px;
    background:linear-gradient(90deg,#4da3ff,#2f7fff);
    border:none;
    font-size:17px;
    font-weight:700;
    border-radius:14px;
    cursor:pointer;
    color:white;
    box-shadow:0 6px 15px rgba(0,0,0,.4);
}

/* ===== BLOCKED ===== */
.blocked{
    color:#ff6b6b;
    font-weight:bold;
    margin-top:15px;
}

/* ===== RESULT ===== */
.result{
    margin-top:15px;
    font-size:20px;
    color:#ffd700;
    font-weight:700;
}

/* ===== TABLE ===== */
.table{
    margin:20px;
    border-radius:16px;
    overflow:hidden;
    background:rgba(0,0,0,.4);
}

.row{
    display:flex;
    justify-content:space-between;
    padding:14px;
    border-bottom:1px solid rgba(255,255,255,.08);
}

.row.red{
    background:rgba(139,0,0,.6);
}

.row span{
    font-size:13px;
}
</style>

</head>

<body>

<div class="header">üé° LUCKY SPIN</div>

<div class="wheel-container">
    <div class="pointer"></div>
    <div id="wheel" class="wheel"></div>
    <div class="center-btn">START</div>
</div>

<div class="info-box">
    Chances restantes de tirage :
    <strong>{{ current_user.spin_chances }}</strong>
</div>

{% if not blocked %}
<form method="POST" onsubmit="spinWheel()">
    <button class="spin-btn">LANCER</button>
</form>
{% else %}
<div class="blocked">‚õî Vous avez d√©j√† utilis√© votre Lucky Spin</div>
{% endif %}

{% if result %}
<div class="result">üéâ Gain : {{ result }} XOF</div>
{% endif %}

{% if need_invest %}
<div class="alert alert-warning">
    ‚ö†Ô∏è Vous devez effectuer un investissement actif pour d√©bloquer le Lucky Spin.
</div>
<a href="/investir" class="btn btn-primary">Investir maintenant</a>
{% endif %}

<!-- ===== CONDITIONS ===== -->
<div class="table">
    <div class="row">
        <span>D√©p√¥t 3000 ‚Äì 6000 XOF</span>
        <span>1 fois</span>
    </div>
    <div class="row">
        <span>D√©p√¥t 8000 ‚Äì 11000 XOF</span>
        <span>2 fois</span>
    </div>
    <div class="row">
        <span>D√©p√¥t 12000 ‚Äì 18000 XOF</span>
        <span>3 fois</span>
    </div>
    <div class="row red">
        <span>D√©p√¥t 20000 ‚Äì 40000 XOF</span>
        <span>5 fois</span>
    </div>
</div>

<script>
function spinWheel(){
    const wheel = document.getElementById("wheel");
    const rotation = 360 * 7 + Math.floor(Math.random() * 360);
    wheel.style.transform = `rotate(${rotation}deg)`;
}
</script>

</body>
</html>
